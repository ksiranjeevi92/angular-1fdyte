import { Component } from '@angular/core';

@Component({
  selector: 'barcode-print',
  templateUrl: './barcode.print.component.html',
  styleUrls: [ './barcode.print.component.scss' ]
})
export class BarCodePrintComponent  {
  name = 'Angular';
  printData = 
      [{
            "boxId": 8,
            "boxCode": "SUBUNRMI000008",
            "totalPackQuantity": 12,
            "totalBaseQuantity": 120,
            "orderReference": "BTD",
            "boxStatus": 1,
            "growerCode": "SUB",
            "dayStamp": null,
            "boxType": "",
            "flowers": [
                {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                 {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                }
            ]
        },
        {
            "boxId": 8,
            "boxCode": "SUBUNRMI000008",
            "totalPackQuantity": 12,
            "totalBaseQuantity": 120,
            "orderReference": "BTD",
            "boxStatus": 1,
            "growerCode": "SUB",
            "dayStamp": null,
            "boxType": "",
            "flowers": [
                {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                }
            ]
        },
        {
            "boxId": 8,
            "boxCode": "SUBUNRMI000008",
            "totalPackQuantity": 12,
            "totalBaseQuantity": 120,
            "orderReference": "BTD",
            "boxStatus": 1,
            "growerCode": "SUB",
            "dayStamp": null,
            "boxType": "",
            "flowers": [
                {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                 {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                }
            ]
        },
        {
            "boxId": 8,
            "boxCode": "SUBUNRMI000008",
            "totalPackQuantity": 12,
            "totalBaseQuantity": 120,
            "orderReference": "BTD",
            "boxStatus": 1,
            "growerCode": "SUB",
            "dayStamp": null,
            "boxType": "",
            "flowers": [
                {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                 {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                }
            ]
        },
        {
            "boxId": 8,
            "boxCode": "SUBUNRMI000008",
            "totalPackQuantity": 12,
            "totalBaseQuantity": 120,
            "orderReference": "BTD",
            "boxStatus": 1,
            "growerCode": "SUB",
            "dayStamp": null,
            "boxType": "",
            "flowers": [
                {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                 {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                }
            ]
        },
        {
            "boxId": 8,
            "boxCode": "SUBUNRMI000008",
            "totalPackQuantity": 12,
            "totalBaseQuantity": 120,
            "orderReference": "BTD",
            "boxStatus": 1,
            "growerCode": "SUB",
            "dayStamp": null,
            "boxType": "",
            "flowers": [
                {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                 {
                    "boxFlowerId": 8,
                    "itemCode": "F100081",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "60 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                },
                {
                    "boxFlowerId": 9,
                    "itemCode": "F100083",
                    "description": "Rose - PIN",
                    "color": "PIN",
                    "size": "80 CM",
                    "packUoMCode": "BUNCH10",
                    "baseUoMCode": "STEM",
                    "packQuantity": 6,
                    "baseQuantity": 60
                }
            ]
        },
        ];
  

  print() {
    for(const i of this.printData){
      for(const j of i.flowers){}
    }
    const printContent = 
    `
    <html>
    <head>
    <style>
      
body {
  padding: 0;
  margin: 0;
}
  @media print{
            body {
              margin-top:0 !important;
              margin-right: 3mm;
              margin-left: 3mm;
              }
            @page {
                page-break-before:always;
                margin-top: 4mm;
                margin-bottom: 0 !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                height: 50mm;
            }
        }

        .d-flex {
          display: flex;
        }
        .flex-row {
          flex-direction: row;
        }

        .flex-col {
          flex-direction: column;
        }
        .container {
          padding: 5px;
          width: 100mm;
        
        }

        .data-container {
          display: flex;
          flex:70;
        }

        .data-right {
          display: flex;
          flex: 50;
          padding: 5px;
        }

        .data-left {
          display: flex;
          flex: 50;
          padding: 5px;
        }

        .bar-code-container {
          display: flex;
          flex: 30;
        }

        .p-5 {
          padding: 5px;
        }
        .pr-5 {
          padding-right: 5px;
        }

        .f-70 {
          flex: 80;
        }

        .f-30 {
          flex: 30;
        }
        .reference-code {
          font-weight: bold;
          font-size: 2rem;
        }
        .pt-10 {
          padding-top: 10px;
        }
    </style>
</head>
<body>
        <div id="print" class="container d-flex flex-col" *ngFor="let item of printData">
  <div class="data-container flex-col">
    <div class="d-flex flex-col" *ngFor="let item2 of item.flowers">
          <div class="d-flex flex-row">
       <div class="data-left flex-col">
      <div class="d-flex flex-row">
        <div class="pr-5">{{item2.baseUoMCode}}</div>&nbsp;
        <div class="">{{.description}}</div>
      </div>
    </div>
    <div class="data-right flex-col">
       <div class="d-flex flex-row" style="justify-content: flex-end">
        <div class="pr-5">{{item2.color}}</div>&nbsp;
        <div class="">{{item2.size}}</div>
      </div>
    </div>
    </div>
    </div>
  </div>
  <div class="bar-code-container flex-row">
    <div class="d-flex f-70">
      <ngx-barcode [bc-width]="1.5" [bc-height]="40" [bc-value]="item.boxCode" [bc-display-value]="true"></ngx-barcode>
    </div>
    <div class="d-flex f-30 flex-col pt-10">
      <span class="reference-code" >{{item.orderReference}}</span>
    </div>
  </div>
</div>
</body>
</html>
    `
    // const printArea = document.getElementById('printArea').innerHTML += printContent;
    // setTimeout(() => { 
    //   window.print();
    //   window.close();
    // }, 200)
    let popupWin; 
    popupWin = window.open('', '_blank', 'top=0,left=0,height=100%,width=auto');
    popupWin.document.open();
    popupWin.document.write(
     printContent
    );
    popupWin.document.close();
  }

  genBody() {
    let body = '';
    for(const i of this.printData) {
      for(const j of i.flowers) {
        `
        <div id="print" class="container d-flex flex-col" *ngFor="let item of printData">
  <div class="data-container flex-col">
    <div class="d-flex flex-col" *ngFor="let item2 of item.flowers">
          <div class="d-flex flex-row">
       <div class="data-left flex-col">
      <div class="d-flex flex-row">
        <div class="pr-5">{{item2.baseUoMCode}}</div>&nbsp;
        <div class="">{{.description}}</div>
      </div>
    </div>
    <div class="data-right flex-col">
       <div class="d-flex flex-row" style="justify-content: flex-end">
        <div class="pr-5">{{item2.color}}</div>&nbsp;
        <div class="">{{item2.size}}</div>
      </div>
    </div>
    </div>
    </div>
  </div>
  <div class="bar-code-container flex-row">
    <div class="d-flex f-70">
      <ngx-barcode [bc-width]="1.5" [bc-height]="40" [bc-value]="item.boxCode" [bc-display-value]="true"></ngx-barcode>
    </div>
    <div class="d-flex f-30 flex-col pt-10">
      <span class="reference-code" >{{item.orderReference}}</span>
    </div>
  </div>
</div>
        `
      }
    }
    
  }
}

